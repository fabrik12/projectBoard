<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <style>
      /* Estilos rápidos para el dashboard */
      .admin-container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <div class="admin-container">
      <header>
        <h1>Dashboard de Proyectos</h1>
        <a href="{{ url_for('admin.logout') }}">Cerrar Sesión</a>
      </header>

      <section id="create-project">
        <h2>Crear Nuevo Proyecto</h2>
        <form method="post" action="{{ url_for('admin.create_project') }}">
          <label for="name">Nombre del Proyecto:</label>
          <input type="text" name="name" id="name" required />
          <label for="code">Código de Acceso (ej. PROJ-XYZ):</label>
          <input type="text" name="code" id="code" required />
          <button type="submit">Crear</button>
        </form>
      </section>

      <section id="project-list">
        <h2>Proyectos Existentes</h2>
        <table>
          <tbody>
            {% for project in projects %}
            <tr>
              <td>{{ project.id }}</td>
              <td>{{ project.name }}</td>
              <td><code>{{ project.code }}</code></td>
              <td>
                <form
                  method="post"
                  action="{{ url_for('admin.delete_project', project_id=project.id) }}"
                  onsubmit="return confirm('¿Estás seguro de que quieres eliminar este proyecto y TODAS sus tareas?');"
                >
                  <button type="submit">Eliminar</button>
                </form>
              </td>
            </tr>
            {% else %} {% endfor %}
          </tbody>
        </table>
      </section>
    </div>
  </body>
</html>
